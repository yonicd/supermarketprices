pb <- txtProgressBar(...)
pb <- txtProgressBar()
for(i in 4:6/max(b)){
out=download.packages(x1$Package[i],"c:\\r\\new\\")
setTxtProgressBar(pb, i)
}
close(pb)
b=7:20
pb <- txtProgressBar(initial = 7,max=10)
for(i in b){
out=download.packages(x1$Package[i],"c:\\r\\new\\")
setTxtProgressBar(pb, i)
}
b
b=20:30
b=20:30
pb <- txtProgressBar(initial = min(b),min=min(b),max=max(b))
for(i in b){
out=download.packages(x1$Package[i],"c:\\r\\new\\")
setTxtProgressBar(pb = pb, value = i)
}
close(pb)
b=30:50
pb <- txtProgressBar(initial = min(b),min=min(b),max=max(b))
for(i in b){
out=download.packages(x1$Package[i],"c:\\r\\new\\")
setTxtProgressBar(pb = pb, value = i)
}
close(pb)
out=download.packages(x1$Package[-c(1:50)],"c:\\r\\new\\")
x=list.files("c:\\r\\new\\")
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x1=anti_join(a,x%>%select(Package,Version),by=c("Package","Version"))
x.new=x
x=list.files("c:\\r\\all\\")
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x=rbind(x,x.new)
x=distinct(x)
x=list.files("c:\\r\\all\\")
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x2=rbind(x,x.new)
x3=anti_join(a,x%>%select(Package,Version),by=c("Package","Version"))
rm(x2,x3)
View(x.new)
View(a)
a$file=paste0(paste(a$Package,a$Version,sep="_"),".zip)
a$file=paste0(paste(a$Package,a$Version,sep="_"),".zip")
View(a)
View(x.new)
a$file%in%x.new$file
x.new$file%in%a$file
which(!x.new$file%in%a$file)
View(x1)
x1$file=paste0(paste(x1$Package,x1$Version,sep="_"),".zip")
which(!x.new$file%in%x1$file)
which(x.new$file%in%x1$file)
which(x1$file%in%x.new$file)
x1=anti_join(a,x%>%select(Package,Version),by=c("Package","Version"))
x1=anti_join(a,x%>%select(Package,Version),by=c("Package","Version"))
x=list.files("c:\\r\\all\\")
x0==list.files("c:\\r\\new\\")
x0=list.files("c:\\r\\new\\")
x=c(x,x0)
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x$Version=str_replace_all(x$Version,"-",".")
x1=x%>%group_by(Package)%>%do(.,head(.,1))
x2=anti_join(a,x%>%select(Package,Version),by=c("Package","Version"))
View(x2)
x=list.files("c:\\r\\all\\")
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x$Version=str_replace_all(x$Version,"-",".")
x1=x%>%group_by(Package)%>%do(.,head(.,-1))
x=list.files("c:\\r\\all\\")
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x1=x%>%group_by(Package)%>%do(.,head(.,-1))
a=available.packages()
a=as.data.frame(available.packages())
x1=anti_join(a,x%>%select(Package,Version),by=c("Package","Version"))
x1$Package[-c(1:50)]
x=list.files("c:\\r\\all\\")
x0=list.files("c:\\r\\new\\")
x=c(x,x0)
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=str_replace_all(x$Version,"-",".")
x$Version=sapply(str_split(x$x,"_"),'[',2)
x=data.frame(file=x,x=gsub(".zip","",x))
x=list.files("c:\\r\\all\\")
x0=list.files("c:\\r\\new\\")
x=c(x,x0)
x=data.frame(file=x,x=gsub(".zip","",x))
x$Package=sapply(str_split(x$x,"_"),'[',1)
x$Version=sapply(str_split(x$x,"_"),'[',2)
x$Version=str_replace_all(x$Version,"-",".")
x1=x%>%group_by(Package)%>%do(.,head(.,-1))
View(x1)
View(x)
x2=x%>%group_by(Package)%>%do(.,head(.,1))
rm(list=ls())
library(gtools)
install.packages("gtools")
library(gtools)
getDependencies("dplyr")
library(tools)
write_PACKAGES("C:\\R\\dplyr")
install.packages("dplyr",contriburl="file:///c:/r/dplyr/")
install.packages("dplyr",contriburl="file:////READYSHARE/USB_Storage/R/dplyr/")
install.packages("PerformanceAnalytics")
library("PerformanceAnalytics", lib.loc="~/R/win-library/3.2")
library(hvest)
library(rvest)
url.base="http://prices.shufersal.co.il/FileObject/UpdateCategory?catID=0&storeId=0&page="
max.page=as.numeric(gsub("[^1-9]","",html(paste0(url.base,1))%>%html_nodes(xpath="//div[@id='gridContainer']/table/tfoot/tr/td/a[6]")%>%html_attr("href")))
shufersal.url=html(paste0(url.base,max.page))%>%html_nodes("a")%>%html_attr("href")
shufersal.url=shufersal.url[grepl("Store",shufersal.url)]
temp <- tempfile()
download.file(shufersal.url,temp,quiet = T,mode="wb")
readLines(gzfile(temp),encoding = "UTF-8")
xmlParse(readLines(gzfile(temp),encoding = "UTF-8"))
a
library(XML)
setwd("C:/Users/yoni/Documents/GitHub/supermarketprices")
temp="PricesFull7290803800003-004-201505280000.gz"
a=xmlParse(c(readLines(gzfile(temp),encoding = "UTF-8"),"</Root>"))
library(rvest);library(XML);library(stringr);library(plyr);library(dplyr);library(tidyr)
doc=xmlParse(c(readLines(gzfile(temp),encoding = "UTF-8"),"</Root>"))
rm(a)
header=getNodeSet(shufersal.doc,"/Root/*[not(self::Items)]")
header=getNodeSet(doc,"/Root/*[not(self::Items)]")
headerdf=as.data.frame(as.list(setNames(xmlSApply(header,xmlValue),xmlSApply(header,xmlName))))
View(headerdf)
prices=xmlToDataFrame(getNodeSet(doc,"/Root/Items/Item"))
prices=merge(headerdf,prices)
View(prices)
prices=prices%>%mutate_each(funs(iconv(.,"UTF-8")))
View(prices)
a=xmlParse("https://url.publishedprices.co.il/file/d/Stores7290803800003-201505280100.xml",isURL = T)
a=xmlParse("Stores7290803800003-201505280100.xml")
a
a=xmlToDataFrame(xmlParse("Stores7290803800003-201505280100.xml"))
View(a)
a=xmlParse("Stores7290803800003-201505280100.xml")
doc=xmlParse("Stores7290803800003-201505280100.xml")
header=getNodeSet(doc,"/Root/*[not(self::Stores)]")
headerdf=as.data.frame(as.list(setNames(xmlSApply(header,xmlValue),xmlSApply(header,xmlName))))
stores=xmlToDataFrame(getNodeSet(doc,"/Root/Stores/Store"))
stores=merge(headerdf,stores)
stores=xmlToDataFrame(getNodeSet(doc,"/Root/Stores/Store/"))
stores=xmlToDataFrame(getNodeSet(doc,"/Root/Stores/Store"))
getNodeSet(doc,"/Root/Stores/Store")
doc
stores=xmlToDataFrame(getNodeSet(doc,"/Root/SubChains/SubChain/Stores/Store"))
stores=merge(headerdf,stores)
View(stores)
stores=xmlToDataFrame(getNodeSet(doc,"/Root/SubChains/SubChain/Stores/Store"))
stores=merge(headerdf,stores)%>%mutate_each(funs(iconv(.,"UTF-8")))
View(stores)
library(sp)
library(sp);library(RgoogleMaps);library(maptools);library(ggplot2);
load("stores_mega.rdata")
mega.stores$street.number=gsub("[^0-9/-]",'',mega.stores$Address)
mega.stores$street.name=gsub("[0-9/-]",'',mega.stores$Address)
mega.stores=mega.stores%>%mutate(full.address=paste(City,street.name,street.number))
mega.stores=data.frame(mega.stores,t(sapply(mega.stores$full.address, getGeoCode)),row.names = NULL,check.names = F)
projxy=project(as.matrix(mega.stores[,c(18,17)]),proj= "+init=epsg:2039 +proj=tmerc +lat_0=31.73439361111111
+lon_0=35.20451694444445 +k=1.0000067 +x_0=219529.584
+y_0=626907.39 +ellps=GRS80 +towgs84=-48,55,52,0,0,0,0
+units=m +no_defs")
library(sp);library(RgoogleMaps);library(maptools);library(ggplot2);
projxy=project(as.matrix(mega.stores[,c(18,17)]),proj= "+init=epsg:2039 +proj=tmerc +lat_0=31.73439361111111
+lon_0=35.20451694444445 +k=1.0000067 +x_0=219529.584
+y_0=626907.39 +ellps=GRS80 +towgs84=-48,55,52,0,0,0,0
+units=m +no_defs")
library(maptools);
detach("package:maptools", unload=TRUE)
library("maptools", lib.loc="~/R/win-library/3.2")
install.packages("rgeos")
library("rgeos", lib.loc="~/R/win-library/3.2")
library("maptools", lib.loc="~/R/win-library/3.2")
library(RgoogleMaps)
View(mega.stores)
library(rgdal)
projxy=project(as.matrix(mega.stores[,c(18,17)]),proj= "+init=epsg:2039 +proj=tmerc +lat_0=31.73439361111111
+lon_0=35.20451694444445 +k=1.0000067 +x_0=219529.584
+y_0=626907.39 +ellps=GRS80 +towgs84=-48,55,52,0,0,0,0
+units=m +no_defs")
load("stores_mega.rdata")
mega.stores$street.number=gsub("[^0-9/-]",'',mega.stores$Address)
mega.stores$street.name=gsub("[0-9/-]",'',mega.stores$Address)
mega.stores=mega.stores%>%mutate(full.address=paste(City,street.name,street.number))
mega.stores=data.frame(mega.stores,t(sapply(mega.stores$full.address, getGeoCode)),row.names = NULL,check.names = F)
as.matrix(mega.stores[1,c(20,19)])
projxy=project(as.matrix(mega.stores[1,c(20,19)]),proj= "+init=epsg:2039 +proj=tmerc +lat_0=31.73439361111111
+lon_0=35.20451694444445 +k=1.0000067 +x_0=219529.584
+y_0=626907.39 +ellps=GRS80 +towgs84=-48,55,52,0,0,0,0
+units=m +no_defs")
colnames(projxy)=c("x","y")
mega.stores=data.frame(mega.stores,projxy,row.names = NULL,check.names = F)
View(mega.stores)
mega.stores$x=NULL
mega.stores$y=NULL
projxy=project(as.matrix(mega.stores[,c(20,19)]),proj= "+init=epsg:2039 +proj=tmerc +lat_0=31.73439361111111
+lon_0=35.20451694444445 +k=1.0000067 +x_0=219529.584
+y_0=626907.39 +ellps=GRS80 +towgs84=-48,55,52,0,0,0,0
+units=m +no_defs")
colnames(projxy)=c("x","y")
mega.stores=data.frame(mega.stores,projxy,row.names = NULL,check.names = F)
View(mega.stores)
isr_shp_poly <- readShapePoly("stat_polygon_gis/lamas_statistics08.shp",
IDvar = "OBJECTID",
proj4string = CRS("+init=epsg:2039"))
over(isr_shp_poly,mega.stores[,c(21,22)])
over(isr_shp_poly,as.matrix(mega.stores[,c(21,22)]))
plot(isr_shp_poly)
r1 = cbind(c(180114, 180553, 181127, 181477, 181294, 181007, 180409,
180162, 180114), c(332349, 332057, 332342, 333250, 333558, 333676,
332618, 332413, 332349))
r1
r2 = cbind(c(180042, 180545, 180553, 180314, 179955, 179142, 179437,
179524, 179979, 180042), c(332373, 332026, 331426, 330889, 330683,
331133, 331623, 332152, 332357, 332373))
r3 = cbind(c(179110, 179907, 180433, 180712, 180752, 180329, 179875,
179668, 179572, 179269, 178879, 178600, 178544, 179046, 179110),
c(331086, 330620, 330494, 330265, 330075, 330233, 330336, 330004,
329783, 329665, 329720, 329933, 330478, 331062, 331086))
r4 = cbind(c(180304, 180403,179632,179420,180304),
c(332791, 333204, 333635, 333058, 332791))
polygon(r1)
data(meuse)
coordinates(meuse) = ~x+y
plot(meuse)
polygon(r1)
polygon(r2)
polygon(r3)
polygon(r4)
over(sr, meuse[,1:4], fn = mean)
sr1=Polygons(list(Polygon(r1)),"r1")
sr2=Polygons(list(Polygon(r2)),"r2")
sr3=Polygons(list(Polygon(r3)),"r3")
sr4=Polygons(list(Polygon(r4)),"r4")
sr=SpatialPolygons(list(sr1,sr2,sr3,sr4))
srdf=SpatialPolygonsDataFrame(sr, data.frame(cbind(1:4,5:2),
row.names=c("r1","r2","r3","r4")))
over(sr, meuse[,1:4], fn = mean)
sapply(over(sr, geometry(meuse), returnList = TRUE), length)
over(sr, geometry(meuse), returnList = TRUE)
over(isr_shp_poly, geometry(projxy), returnList = TRUE)
class(r1)
class(projxy)
SpatialPointsDataFrame(projxy)
SpatialPointsDataFrame(projxy[complete.cases(projxy)])
set.seed(1331)
pts = cbind(1:5, 1:5)
dimnames(pts)[[1]] = letters[1:5]
df = data.frame(a = 1:5)
row.names(df) = letters[5:1]
View(df)
pts
SpatialPointsDataFrame(pts, df)
SpatialPointsDataFrame(pts, df, match.ID = TRUE)
SpatialPointsDataFrame(pts, df)
SpatialPointsDataFrame(pts, df, match.ID = TRUE)
SpatialPointsDataFrame(pts, df, match.ID = F)
df$m=letters[5:1]
SpatialPointsDataFrame(pts, df, match.ID = "m")
df
pts=projxy[complete.cases(projxy)]
pts=projxy
pts=projxy[complete.cases(projxy),]
SpatialPointsDataFrame(pts, data.frame(a=1:171))
pts=SpatialPointsDataFrame(pts, data.frame(a=1:171))
over(isr_shp_poly,pts,returnList = T)
pts=SpatialPointsDataFrame(pts, data.frame(a=1:171),proj4string = CRS("+init=epsg:2039"))
over(isr_shp_poly,pts,returnList = T)
pts
pts=SpatialPoints(pts)
pts=projxy[complete.cases(projxy),]
pts=SpatialPoints(pts)
pts=SpatialPoints(pts,proj4string = CRS("+init=epsg:2039"))
pts=SpatialPoints(projxy[complete.cases(projxy),],proj4string = CRS("+init=epsg:2039"))
plot(pts)
plot(isr_shp_poly)
plot(pts)
over(isr_shp_poly,pts,returnList = T)
a=over(isr_shp_poly,pts,returnList = T)
sapply(a,length)
sapply(a,length)=>0
sapply(a,length)>=0
a1=sapply(a,length)
a1=sapply(a,length)>0
a[a1]
a1$'3195'
a1[[3195]]
a1[3195]
a[3195]
a[[3195]]
a[a1]
ldply(a[a1])
ldply(a)
unlist(a[a1])
as.data.frame(x=unlist(a[a1]))
View(as.data.frame(x=unlist(a[a1])))
View(data.frame(x=unlist(a[a1])))
a=data.frame(x=unlist(a[a1]))
a$OBJECTID=names(a)
a$OBJECTID=as.numeric(names(a))
a$OBJECTID=as.numeric(as.character(names(a)))
a$OBJECTID=names(a)
a=over(isr_shp_poly,pts,returnList = T)
a=data.frame(x=unlist(a[a1]))
a$OBJECTID=as.numeric(names(a))
View(a)
a$OBJECTID=as.numeric(row.names(a))
View(a)
a%>%count(OBJECTID)
a%>%count(OBJECTID)%>%filter(n>1)
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)>0
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)>0
a=data.frame(x=unlist(a[a1]))
a$OBJECTID=as.numeric(row.names(a))
View(a)
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)>0
df.a=data.frame(x=unlist(a[a1]))
df.a$OBJECTID=as.numeric(row.names(df.a))
row.names(df.a)=NULL
View(df.a)
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)
a[a1>1]
a[a1>2]
View(df.a)
names(a)
length(names(a[a1>0]))
a[[58]]
names(a)[1]
df.a=ldply(a[a1>0],.fun = function(x){
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
})
a[a1>0]
a[a1>0][[1]]
x=a[a1>0][[1]]
x=a[a1>0]
x=a[a1>0][1]
x
x[[1]]
names(x)
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
x=a[a1>0][2]
x
x=a[a1>0][10]
x
x=a[a1>1][1]
x
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
ldply(a[a1==1],.fun = function(x){
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
})
ldply(a[a1==1],.fun = function(x){
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
})
ldply(a[a1==1],.fun = function(x){
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
})
ldply(a[a1==1][c(1,2)],.fun = function(x){
data.frame(StoreId=x[[1]])%>%mutate(OBJECTID=as.numeric(names(x)))
})
a[a1==1]
df.a=ldply(a[a1==1],.fun = function(x){
data.frame(StoreId=x[[1]])
})
View(df.a)
df.a=ldply(a[a1>0],.fun = function(x){
data.frame(StoreId=x[[1]])
},.id = "OBJECTID")
View(df.a)
a[a1>1][1]
View(df.a)
a[a1>1][[1]]
df.a=ldply(a[a1>0],.fun = function(x){
data.frame(StoreId=c(x[[1]]))
},.id = "OBJECTID")
a[a1>2]
unlist(a[a1>2])
unlist(a[a1>2],recursive = F)
unlist(a[a1>2],recursive = T)
unlist(a[a1>2])
unlist(a[a1>1])
df.a=rbind(data.frame(x=unlist(a[a1==1]),x=0),data.frame(x=unlist(a[a1>1]),x=1))
View(df.a)
df.a=rbind(data.frame(x=unlist(a[a1==1]),x1=0),data.frame(x=unlist(a[a1>1]),x1=1))
View(df.a)
df.a=rbind(data.frame(x=unlist(a[a1==1]),x1=1),data.frame(x=unlist(a[a1>1]),x1=10))
df.a$OBJECTID=floor(as.numeric(row.names(df.a))/df.a$x1)
row.names(df.a)=NULL
View(df.a)
df.a$x1=NULL
View(df.a)
pts@coords
a=over(isr_shp_poly,pts,returnList = F)
a[!is.na(a)]
a.df=data.frame(x=a[!is.na(a)])
View(a.df)
rm(a.df)
a=over(isr_shp_poly,pts,returnList = F)
a1=sapply(a,length)
pts.df=rbind(data.frame(x=unlist(a[a1==1]),x1=1),data.frame(x=unlist(a[a1>1]),x1=10))
pts.df$OBJECTID=floor(as.numeric(row.names(pts.df))/pts.df$x1)
row.names(pts.df)=NULL
pts.df$x1=NULL
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)
pts.df=rbind(data.frame(x=unlist(a[a1==1]),x1=1),data.frame(x=unlist(a[a1>1]),x1=10))
pts.df$OBJECTID=floor(as.numeric(row.names(pts.df))/pts.df$x1)
row.names(pts.df)=NULL
pts.df$x1=NULL
rm(r1,r2,r3,r4)
rm(a,a1)
rm(list=ls(pattern = "sr"))
rm(x)
rm(df,df.a)
rm(meuse)
View(pts.df)
pts.df=data.frame(pts.df,pts@coords,check.names = F)
View(pts.df)
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)
pts.df=rbind(data.frame(row.id=unlist(a[a1==1]),x1=1),data.frame(row.id=unlist(a[a1>1]),x1=10))
pts.df$OBJECTID=floor(as.numeric(row.names(pts.df))/pts.df$x1)
pts.df=data.frame(pts.df,pts@coords,check.names = F,row.names = NULL)%>%select(-c(row.id,x1))
a=over(isr_shp_poly,pts,returnList = T)
isr_shp_poly <- readShapePoly("stat_polygon_gis/lamas_statistics08.shp",
IDvar = "OBJECTID",
proj4string = CRS("+init=epsg:2039"))
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)
pts.df=rbind(data.frame(row.id=unlist(a[a1==1]),x1=1),data.frame(row.id=unlist(a[a1>1]),x1=10))
pts.df$OBJECTID=floor(as.numeric(row.names(pts.df))/pts.df$x1)
pts.df=data.frame(pts.df,pts@coords,check.names = F,row.names = NULL)%>%select(-c(row.id,x1))
View(pts.df)
mega.stores1=left_join(mega.stores,pts.df,by=c("x","y"))
View(mega.stores1)
View(mega.stores)
View(pts.df)
pts.df%>%filter(duplicated(x))
pts@coords
duplicated(pts@coords)
pts@coords[duplicated(pts@coords)]
pts@coords[duplicated(pts@coords),]
projxy=projxy[!duplicated(projxy),]
pts=SpatialPoints(projxy[complete.cases(projxy),],proj4string = CRS("+init=epsg:2039"))
a=over(isr_shp_poly,pts,returnList = T)
a1=sapply(a,length)
pts.df=rbind(data.frame(row.id=unlist(a[a1==1]),x1=1),data.frame(row.id=unlist(a[a1>1]),x1=10))
pts.df$OBJECTID=floor(as.numeric(row.names(pts.df))/pts.df$x1)
pts.df=data.frame(pts.df,pts@coords,check.names = F,row.names = NULL)%>%select(-c(row.id,x1))
mega.stores1=left_join(mega.stores,pts.df,by=c("x","y"))
View(mega.stores1)
rm(mega.stores1)
mega.stores=left_join(mega.stores,pts.df,by=c("x","y"))
names(mega.stores)[23]
isr_poly_df <- as.data.frame(isr_shp_poly)
View(isr_poly_df)
isr_points <- sp2tmap(isr_shp_poly)
names(isr_points) <- c("OBJECTID", "x", "y")
isr=left_join(isr_points,isr_poly_df,by=c("OBJECTID"))
names(isr)
ggplot(data = isr%>%filter(CITY==3000), aes(x=x, y=y)) +
geom_polygon(color = "black", fill="white")+
scale_fill_discrete(guide=F)
View(mega.stores)
ggplot(data = isr%>%filter(CITY==5000), aes(x=x, y=y)) +
geom_polygon(color = "black", fill="white")+
scale_fill_discrete(guide=F)+
geom_point(data=mega.stores,aes(x=x,y=y),colour="red")
ggplot(data = isr%>%filter(CITY==5000), aes(x=x, y=y)) +
geom_polygon(color = "black", fill="white")+
scale_fill_discrete(guide=F)
names(mega.stores)
ggplot(data = isr%>%filter(CITY==5000), aes(x=x, y=y)) +
geom_polygon(color = "black", fill="white")+
scale_fill_discrete(guide=F)+
geom_point(data=mega.stores%>%filter(City=="תל-אביב"),aes(x=x,y=y),colour="red")
ggplot(data = isr%>%filter(CITY==5000), aes(x=x, y=y)) +
geom_polygon(color = "black", fill="white")+
scale_fill_discrete(guide=F)+
geom_point(data=mega.stores%>%filter(City=="תל-אביב"),aes(x=x,y=y,colour=OBJECTID))
ggplot(data = isr%>%filter(CITY==5000), aes(x=x, y=y)) +
geom_polygon(color = "black", fill="white")+
scale_fill_discrete(guide=F)+
geom_point(data=mega.stores%>%filter(City=="תל-אביב"),
aes(x=x,y=y,colour=factor(OBJECTID)))
rm(a)
rm(a1)
View(isr_poly_df)
a=fortify(isr_shp_poly)
View(a)
rm(a)
